\begin{tikzpicture}
\pgfplotstableread[col sep=space]{img/image_text/ma-lat-0.60-v4.txt}{\datatablesixty}
\pgfplotstableread[col sep=space]{img/image_text/ma-lat-0.75-v4.txt}{\datatableseventyfive}
\pgfplotstableread[col sep=space]{img/image_text/ma-lat-0.90-v4.txt}{\datatableninty}

\begin{groupplot}[
    group style={
        group name=plots,
        group size=1 by 3,
        xlabels at=edge bottom,
        xticklabels at=edge bottom,
        vertical sep=5pt
    },
axis x line* = bottom,
xlabel near ticks,
major x tick style = transparent,
xlabel={},
height=2.8cm,
width=0.88\textwidth,
xmin=0,
xmax=23,
enlargelimits=false,
tick align = outside,
tick style={white},
ylabel style={align=center},
ytick=\empty,
ymin=0,
ymax=30,
ytick={0,5,10,15,20},
yticklabels={,5,10,15,20},
legend cell align=left, 
legend style={ column sep=1ex },
ymajorgrids,
grid style={dashed},
]


\nextgroupplot[ybar=\pgflinewidth,
ylabel shift={0mm},
bar width=2.0pt,
legend entries = {{$\mathsf{Race-to-idle}$},
{$\mathsf{Netflix}$},
{$\mathsf{HBM}$},
{$\mathsf{Adaptive-Control}$},
{$\mathsf{CALOREE-HBM}$}},
legend style={draw=none, legend columns=6,at={(.5,1.7)},anchor=north},
ymin=0,
ymax=90,
ytick={0.0,30.0,60.0,90.0},
yticklabels={,30.0,60.0,90.0},
]

\addplot[color=RACE, fill=RACE]       table[x index=0,y index=3] {\datatablesixty};
\addplot[color=NETFLIX, fill=NETFLIX]     table[x index=0,y index=6] {\datatablesixty};
\addplot[color=HBM, fill=HBM]   table[x index=0,y index=7] {\datatablesixty};
\addplot[color=POET, fill=POET] table[x index=0,y index=9] {\datatablesixty};
\addplot[color=CALOREE-HBM, fill=CALOREE-HBM]     table[x index=0,y index=13] {\datatablesixty};
                                

\nextgroupplot[ybar=\pgflinewidth,
ylabel={\footnotesize Deadline Misses (\%)  {\scriptsize (lower is better)}},
ylabel shift={0mm},
bar width=2.0pt,
ymin=0,
ymax=90,
ytick={0.0,30.0,60.0,90.0},
yticklabels={,30.0,60.0,90.0},
]

%\addplot[color=RACE,fill=RACE] table[x index=0,y index=4] {\datatableseventyfive};
%\addplot[color=HBM,fill=HBM]       table[x index=0,y index=7] {\datatableseventyfive};
%\addplot[color=ADAPT-CONTROL,fill=ADAPT-CONTROL] table[x index=0,y index=9] {\datatableseventyfive};
%\addplot[color=CALOREE-NP,fill=CALOREE-NP]   table[x index=0,y index=10] {\datatableseventyfive};
%\addplot[color=HBM-ADAPT,fill=HBM-ADAPT]       table[x index=0,y index=13] {\datatableseventyfive};
\addplot[color=RACE, fill=RACE]       table[x index=0,y index=3] {\datatableseventyfive};
\addplot[color=NETFLIX, fill=NETFLIX]     table[x index=0,y index=6] {\datatableseventyfive};
\addplot[color=HBM, fill=HBM]   table[x index=0,y index=7] {\datatableseventyfive};
\addplot[color=POET, fill=POET] table[x index=0,y index=9] {\datatableseventyfive};
\addplot[color=CALOREE-HBM, fill=CALOREE-HBM]     table[x index=0,y index=13] {\datatableseventyfive};

\nextgroupplot[ybar=\pgflinewidth,
bar width=2.0pt,
ylabel shift={0mm},
xticklabel shift={0pt},
ymin=0,
ymax=90,
ytick={0.0,30.0,60.0,90.0},
yticklabels={,30.0,60.0,90.0},
x tick label style={rotate=35, anchor=east},
xtick={1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22},
xticklabels={},
]

\addplot[color=RACE, fill=RACE]       table[x index=0,y index=3] {\datatableninty};
\addplot[color=NETFLIX, fill=NETFLIX]     table[x index=0,y index=6] {\datatableninty};
\addplot[color=HBM, fill=HBM]   table[x index=0,y index=7] {\datatableninty};
\addplot[color=POET, fill=POET] table[x index=0,y index=9] {\datatableninty};
\addplot[color=CALOREE-HBM, fill=CALOREE-HBM]     table[x index=0,y index=13] {\datatableninty};

\end{groupplot}
\begin{groupplot}[
    group style={
        group name=plots,
        group size=1 by 6,
        xlabels at=edge top,
        xticklabels at=edge top,
        vertical sep=5pt
    },
axis x line* = top,
xlabel near ticks,
major x tick style = transparent,
height=2.8cm,
width=0.88\textwidth,
xmin=0,
xmax=9,
enlargelimits=false,
tick align = outside,
tick style={white},
ylabel style={align=center},
ytick=\empty,
xtick=\empty,
xticklabels={},
yticklabels={},
ymin=0,
ymax=1,
]

\nextgroupplot[
ylabel shift={12mm},
ylabel style={rotate=270},
ylabel={$\mathsf{60\%}$},
]
\addplot[thick,solid, color=black] coordinates {(0,1) (22,1)};


\nextgroupplot[
ylabel shift={12mm},
ylabel={$\mathsf{75\%}$},
ylabel style={rotate=270},
]
\addplot[thick,solid, color=black] coordinates {(0,1) (22,1)};


\nextgroupplot[
ylabel shift={12mm},
ylabel={$\mathsf{90\%}$},
y label style={rotate=270},
]
\addplot[thick,solid, color=black] coordinates {(0,1) (22,1)};

\end{groupplot}

\end{tikzpicture}
